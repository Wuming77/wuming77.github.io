(self["webpackChunkmanagement_system"]=self["webpackChunkmanagement_system"]||[]).push([[252],{48252:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var r=function(){var e=this;e._self._c;return e._m(0)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"map-view"},[t("div",{attrs:{id:"main"}})])}],o=n(1497),s=n.n(o),a={name:"MapView",data(){return{mapData:{title:{}}}},mounted(){var e=new(s().Map)("main");e.centerAndZoom(new(s().Point)(116.404,39.915),12),e.enableScrollWheelZoom(!0);var t=new(s().Marker)(new(s().Point)(116.404,39.915));e.addOverlay(t),this.loadData()},methods:{loadData(){this.mapData={title:{text:"百度地图演示"}}}}},l=a,c=n(81656),u=(0,c.A)(l,r,i,!1,null,"4743e159",null),d=u.exports},1497:function(){(function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.c=t,n.p="",n(0)})([function(e,t,n){"use strict";const r=n(1);class i{constructor(e){if(this.groupElements=[],this.groups={},this.groupOrder=[],this.mapInstance={},this.activeGroup=0,this.focusMarker={},this.infoWindow=!1,null==e.querySelector)throw new Error("querySelector is not set.");if(null==e.apiKey)throw new Error("apiKey is not set.");if(null==e.mapConfig.center&&null==e.mapConfig.center.lat&&null==e.mapConfig.center.long)throw new Error("center.lat & center.long is not set.");this.configObject=e,this.init().then((e=>this.processMapGroups(e))).catch((e=>{console.log(e)}))}init(){return new Promise((e=>{r.load((t=>{let n=t.maps,r=document.querySelector(this.configObject.querySelector),i=this.configObject.mapConfig,o={zoom:i.zoom,center:new n.LatLng(i.center.lat,i.center.long)};this.mapInstance=new n.Map(r,o),this.infoWindow=new n.InfoWindow({content:"loading"}),e(n)}))}))}processMapGroups(e){return new Promise((t=>{if(this.configObject.focusElement){let t=document.querySelector(this.configObject.focusElement),n=$(t),r=n.data("marker"),i=n.data("marker-icon");this.focusMarker=this.createMarker(e,r,i)}this.groupElements=document.querySelectorAll(this.configObject.groupElements);for(var n=0;n<this.groupElements.length;++n){let t=this.groupElements[n],r=$(t),i=r.data("markers"),o=parseInt(r.data("id")),s=r.data("marker-icon"),a=[];i.forEach((t=>{a.push(this.createMarker(e,t,s,!1))})),this.groups[t.dataset.id]={id:o,markers:a,visible:!1},this.groupOrder.push(o),this.addEvent(e,t,o)}if(this.configObject.firstGroupOn){let t=this.groupOrder.shift(),n=new e.LatLngBounds;this.markerVisible(e,this.groups[t].markers,!0,n),this.groups[t].visible=!0,this.activeGroup=t,this.groupOrder=this.groupOrder.unshift(t)}t(e)}))}createMarker(e,t,n,r=!0){let i=parseFloat(t.latitude),o=parseFloat(t.longitude),s=new e.LatLng(i,o),a=new e.Marker({position:s,map:this.mapInstance,icon:n});var l='<div class="mapPopUp">';l+=`<p>${t.title}</p>`;let c=`http://maps.google.com/maps?f=d&hl=en&geocode=&time=&date=&ttype=&saddr=&daddr=${i},${o}`;l+=`<p><a target="_BLANK" href="${c}" style="color: #000;">Directions</a></p>`,""!==t.description&&null!==t.description&&(l+=`<p>${t.description}</p>`),l+="</div>",e.event.addListener(a,"click",(()=>{this.infoWindow.setContent(l),this.infoWindow.open(this.mapInstance,a)}));let u=new e.LatLngBounds;return this.markerVisible(e,a,r,u),a}markerVisible(e,t,n,r=!1){this.infoWindow.close(),Array.isArray(t)?(t.forEach((e=>{r&&r.extend(e.getPosition()),e.setVisible(n)})),r&&(r.extend(this.focusMarker.getPosition()),this.mapInstance.fitBounds(r))):t.setVisible(n)}addEvent(e,t,n){t.addEventListener("click",this.eventHandler(e,n)),t.addEventListener("touchstart",this.eventHandler(e,n))}eventHandler(e,t){return n=>{this.menuEventActions(n,e,t)}}menuEventActions(e,t,n){e.preventDefault(),this.activeGroup!==n&&(this.markerVisible(t,this.groups[this.activeGroup].markers,!1),this.groups[this.activeGroup].visible=!1),this.activeGroup=n;let r=!this.groups[n].visible,i=!!r&&new t.LatLngBounds;this.markerVisible(t,this.groups[n].markers,r,i)}}e.exports=i},function(e,t,n){var r,i;(function(o,s){if(null===o)throw new Error("Google-maps package can be used only in browser");r=s,i="function"===typeof r?r.call(t,n,t,e):r,void 0===i||(e.exports=i)})("undefined"!==typeof window?window:null,(function(){"use strict";var e="3.18",t=null,n=null,r=!1,i=[],o=[],s=null,a={URL:"https://maps.googleapis.com/maps/api/js",KEY:null,LIBRARIES:[],CLIENT:null,CHANNEL:null,SENSOR:null};a.VERSION=e,a.WINDOW_CALLBACK_NAME="__google_maps_api_provider_initializator__",a._googleMockApiObject={},a.load=function(e){null===n?!0===r?e&&i.push(e):(r=!0,window[a.WINDOW_CALLBACK_NAME]=function(){l(e)},a.createLoader()):e&&e(n);var t=function(){throw new Error("Using promises is not supported anymore. Please take a look in new documentation and use callback instead.")};return{then:t,catch:t,fail:t}},a.createLoader=function(){t=document.createElement("script"),t.type="text/javascript",t.src=a.createUrl(),document.body.appendChild(t)},a.isLoaded=function(){return null!==n},a.createUrl=function(){var e=a.URL;return e+="?callback="+a.WINDOW_CALLBACK_NAME,e+="&sensor="+(!0===a.SENSOR||"true"===a.SENSOR?"true":"false"),a.KEY&&(e+="&key="+a.KEY),a.LIBRARIES.length>0&&(e+="&libraries="+a.LIBRARIES.join(",")),a.CLIENT&&(e+="&client="+a.CLIENT+"&v="+a.VERSION),a.CHANNEL&&(e+="&channel="+a.CHANNEL),e},a.release=function(l){var c=function(){a.KEY=null,a.LIBRARIES=[],a.CLIENT=null,a.SENSOR=!1,a.VERSION=e,n=null,r=!1,i=[],o=[],"undefined"!==typeof window.google&&delete window.google,"undefined"!==typeof window[a.WINDOW_CALLBACK_NAME]&&delete window[a.WINDOW_CALLBACK_NAME],null!==s&&(a.createLoader=s,s=null),null!==t&&(t.parentElement.removeChild(t),t=null),l()};r?a.load((function(){c()})):c()},a.onLoad=function(e){o.push(e)},a.makeMock=function(){s=a.createLoader,a.createLoader=function(){window.google=a._googleMockApiObject,window[a.WINDOW_CALLBACK_NAME]()}};var l=function(e){var t;for(r=!1,null===n&&(n=window.google),t=0;t<o.length;t++)o[t](n);for(e&&e(n),t=0;t<i.length;t++)i[t](n);i=[]};return a}))}])}}]);
//# sourceMappingURL=252.23a32449.js.map